
@{
    ViewData["Title"] = "View Vegetables Seeds";
}
<div class="main-content-area clearfix">
    <!-- =-=-=-=-=-=-= Featured Ads =-=-=-=-=-=-= -->
    <section class="custom-padding pattern-bg">
        <!-- Main Container -->
        <div class="container">
            <!-- Row -->
            <div class="row">
                <!-- Heading Area -->
                <div class="heading-panel">
                    <div class="col-xs-12 col-md-12 col-sm-12 text-center">
                        <!-- Main Title -->
                        <h1>Vegetables<span class="heading-color"> Seeds</span> Advertisements</h1>
                        <!-- Short Description -->
                        <p class="heading-text">Eu delicata rationibus usu. Vix te putant utroque, ludus fabellas duo eu, his dico ut debet consectetuer.</p>
                    </div>
                </div>
                <!-- Middle Content Box -->
                <div class="col-md-12 col-xs-12 col-sm-12">
                    <!-- Row -->
                    <div class="row">
                        <div id="loader1" class="col-md-4 col-md-offset-4"><img class="img-responsive" src="~/images/Loader.gif" /></div>
                        <div id="adLoadFirst"></div>
                        <partial name="_Advertizing" />
                        <div id="ads"></div>
                        <div id="loader2" class="col-md-2 col-md-offset-5"><img class="img-responsive" src="~/images/Loader.gif" /></div>
                    </div>
                </div>
                <!-- Middle Content Box End -->
            </div>
            <!-- Row End -->
        </div>
        <!-- Main Container End -->
    </section>
</div>

@section scripts{
    <script>
        var scrollPercent=@EFarmer.pk.Common.CommonValues.CONTINOUS_SCROLL_PERCENT;
        var processing = false;
        var lastIndex = 0;
        $(document).ready(function () {
            $("#loader2").hide();
            $.get('@Url.Action("GetVegetablesSeeds", "Products")', function (content) {
                $("#adLoadFirst").append(content);
                lastIndex = 6;
                $("#loader1").hide();
            });
        });

        $(document).scroll(function () {

            var scroll = 100 * $(window).scrollTop() / ($(document).height() - $(window).height());
            var count = 3;
            var url = '@Url.Action("LoadVegetablesSeeds","Products")/?count=' + count + "&lastIndex=" + lastIndex;
            if ($(window).width() < 800) {
                count = 1;
            }
            else if ($(window).width() < 1024) {
                 count = 2;
            }
            if (processing) {
                return false;
            }
            if (scroll > scrollPercent && !processing) {
                $("#loader2").show();
                processing = true;
                $(window).scrollTop($(window).scrollTop() - 10);
                $.ajax({
                    type: "GET",
                    url: url,
                    success: function (html) {
                        //$.parseHTML(html).hide().appendTo("#ads").fadeIn();
                        $("#ads").append(html);
                        processing = false;
                        lastIndex += count;
                        $("#loader2").hide();
                    },
                    error: function () {
                        processing = false;
                        $("#loader2").hide();
                    }
                });
            }
        });
    </script>
}
